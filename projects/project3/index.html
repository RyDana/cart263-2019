<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0>

    <!-- CSS stylesheet(s) -->
    <link rel="stylesheet" type="text/css" href="css/style.css" />

    <!-- Library script(s) -->
    <script src="js/libraries/Pizzicato.js"></script>
    <script src="https://aframe.io/releases/0.9.0/aframe.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-component.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@5.1.2/dist/aframe-animation-component.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v6.0.0/dist/aframe-extras.min.js"></script>

    <!-- My script(s) -->
    <script src="js/script.js"></script>

  </head>

  <body>
    <!-- <a-scene stats physics="debug:true;"> -->
    <a-scene fog="type: exponential; color: #047f82; density: 0.02"
      physics='gravity:1.1; friction:2'>
      <a-assets >
        <img src="https://i.imgur.com/KTYARF6.jpg" id="grid" crossorigin="anonymous">
        <img src="assets/images/sea-gif.gif" id="sea_floor">
        <a-mixin id="flap" animation="property: rotation; dir: alternate; loop: true; easing:easeInOutCubic;"></a-mixin>
        <a-mixin id="rotate" animation="property: rotation; loop: true"></a-mixin>
        <a-asset-item id="head-obj" src="assets/models/shark_head.obj"></a-asset-item>
        <a-asset-item id="head-mtl" src="assets/models/shark_head.mtl"></a-asset-item>
        <a-asset-item id="jaw-obj" src="assets/models/shark_jaw.obj"></a-asset-item>
        <a-asset-item id="jaw-mtl" src="assets/models/shark_jaw.mtl"></a-asset-item>
        <a-asset-item id="body-obj" src="assets/models/shark_body.obj"></a-asset-item>
        <a-asset-item id="body-mtl" src="assets/models/shark_body.mtl"></a-asset-item>
        <a-asset-item id="tail-obj" src="assets/models/shark_tail.obj"></a-asset-item>
        <a-asset-item id="tail-mtl" src="assets/models/shark_tail.mtl"></a-asset-item>
        <a-mixin id="body_section_head" geometry="primitive: box; depth: 1; height: 0.8; width: 1.5" material="color: #9D0B28" rotation="0 0 0" pivot="0 0 0" scale="1 1 1"></a-mixin>
        <a-mixin id="body_section_jaw" geometry="primitive: box; depth: 1; height: 0.2; width: 1.5" material="color: #9D0B28" rotation="0 0 0" pivot="0.7 0 0" scale="1 1 1"></a-mixin>
        <a-mixin id="body_section_body" geometry="primitive: box; depth: 1; height: 1; width: 1.5" material="color: #9D0B28" rotation="0 0 0" pivot="0 0 0" scale="1 1 1"></a-mixin>
        <a-mixin id="body_section_tail" geometry="primitive: box; depth: 1; height: 0.8; width: 1.5" material="color: #9D0B28" rotation="0 0 0" pivot="0 0 0" scale="1 1 1"></a-mixin>
      </a-assets>

      <a-entity id='camera' camera look-controls wasd-controls position="0 1 0">
          <a-cursor color='#fff'>
          </a-cursor>
          <a-text id="score"
            value="Press spacebar.\nHit the targets."
            position="-0.05 -0.5 -1"
            color="white"
            width="3"
            anchor="left">
          </a-text>
      </a-entity>

      <a-entity mixin="rotate" position="0 1 0" animation="to: 0 -360 0; dur: 80000; easing: linear">
        <a-entity position="5 0 0" >
          <a-entity mixin="flap" rotation="0 4 0" animation="to: 0 -4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #head-obj; mtl: #head-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="2 0 0" animation="to: -10 0 0; dur: 3000;" pivot="0 0 1">
              <a-entity mixin="" obj-model="obj: #jaw-obj; mtl: #jaw-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
          <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #body-obj; mtl: #body-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 0">
              <a-entity mixin="" obj-model="obj: #tail-obj; mtl: #tail-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>

      <a-entity mixin="rotate" position="0 -6 0" animation="to: 0 -360 0; dur: 9000; easing: linear">
        <a-entity position="3 0 0" >
          <a-entity mixin="flap" rotation="0 4 0" animation="to: 0 -4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #head-obj; mtl: #head-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="2 0 0" animation="to: -10 0 0; dur: 3000;" pivot="0 0 1">
              <a-entity mixin="" obj-model="obj: #jaw-obj; mtl: #jaw-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
          <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #body-obj; mtl: #body-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 0">
              <a-entity mixin="" obj-model="obj: #tail-obj; mtl: #tail-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>

      <a-entity mixin="rotate" position="0 -2 0" animation="to: 0 -360 0; dur: 50000; easing: linear">
        <a-entity position="5 0 0" >
          <a-entity mixin="flap" rotation="0 4 0" animation="to: 0 -4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #head-obj; mtl: #head-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="2 0 0" animation="to: -10 0 0; dur: 3000;" pivot="0 0 1">
              <a-entity mixin="" obj-model="obj: #jaw-obj; mtl: #jaw-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
          <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #body-obj; mtl: #body-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 0">
              <a-entity mixin="" obj-model="obj: #tail-obj; mtl: #tail-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>

      <a-entity mixin="rotate" position="2 1.2 0" animation="to: 0 -360 0; dur: 8000; easing: linear">
        <a-entity position="5 0 0" >
          <a-entity mixin="flap" rotation="0 4 0" animation="to: 0 -4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #head-obj; mtl: #head-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="2 0 0" animation="to: -10 0 0; dur: 3000;" pivot="0 0 1">
              <a-entity mixin="" obj-model="obj: #jaw-obj; mtl: #jaw-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
          <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 1">
            <a-entity>
              <a-entity mixin="" obj-model="obj: #body-obj; mtl: #body-mtl" static-body></a-entity>
            </a-entity>
            <a-entity mixin="flap" rotation="0 -4 0" animation="to: 0 4 0" pivot="0 0 0">
              <a-entity mixin="" obj-model="obj: #tail-obj; mtl: #tail-mtl" static-body></a-entity>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>

      <!-- <a-entity mixin="rotate" position="0 1 0" animation="to: 0 -360 0; dur: 80000; easing: linear">
        <a-entity rotation="0 90 0" position="5 0 0">
          <a-entity rotation="-10 -10 0">
            <a-entity mixin="flap" animation="to: 0 12 0">
              <a-entity mixin="body_section_head" position="0 0.1 0" static-body></a-entity>
              <a-entity mixin="body_section_jaw flap" position="0 -0.4 0" animation="to: 0 0 12; dur: 3000;"></a-entity>
            </a-entity>
          </a-entity>
          <a-entity rotation="-10 10 0" position="1.4 0 0">
            <a-entity mixin="body_section_body flap" animation="to: 0 -12 0"></a-entity>
          </a-entity>
          <a-entity rotation="-10 -10 0" position="2.6 0 0">
            <a-entity mixin="body_section_tail flap" animation="to: 0 12 0"></a-entity>
          </a-entity>
        </a-entity>
      </a-entity> -->

      <!-- <a-box color='#EF2D5E'
        width='5'
        height='5'
        depth='0.4'
        position = '2 8 -7'
        animation__position="property: position;
          dir: alternate;
          dur: 1000;
          easing: easeInSine;
          loop: true;
          to: -2 8 -7"
        static-body
        handle-events
        hit='false'>
      </a-box>

      <a-box color='#EF2D5E'
        width='2'
        height='1'
        depth='0.4'
        position = '10 4 2'
        rotation = '0 90 0'
        animation__position="property: position;
          dir: alternate;
          dur: 1000;
          easing: easeInSine;
          loop: true;
          to: 10 5 -2"
        static-body
        handle-events
        hit='false'>
      </a-box>

      <a-box color='#EF2D5E'
        width='1'
        height='1'
        depth='0.4'
        position = '-16 4 0'
        rotation = '0 90 0'
        animation__position="property: position;
          dir: alternate;
          dur: 1000;
          easing: easeInSine;
          loop: true;
          to: -8 4 0"
        static-body
        handle-events
        hit='false'>
      </a-box> -->

      <a-entity geometry="primitive:cylinder;
          radius:200;
          height:1;"
        position="0 -20 0"
        material="shader:gif;
        src:#sea_floor;
        repeat: 30 30;"
        static-body>
      </a-entity>

      <a-sky color="#02163a" poaition='0 -200 0'>
      </a-sky>


      <a-entity light="type: ambient; color: #BBB"></a-entity>
      <a-entity light="type: directional;
          color: #ffff60;
          intensity: 0.3"
        position="9.8 -2.5 5.1">
      </a-entity>

      <a-ocean color="#1057c9"
        amplitude='1'
        aplitudeVariance='1.5'
        depth="200"
        width="200"
        density="40"
        opacity='0.3'
        position="0 10 0"
        speed='4'
        metalness='1'
        roughness='0.1'
        rotation='90 0 0'>
      </a-ocean>

    </a-scene>

  </body>

</html>
